import{_ as r,c as i,o as l,j as t,a0 as a,a as n,t as s}from"./chunks/framework.Do9hWntK.js";const w=JSON.parse('{"title":"Kubernetes Networking","description":"Setup details","frontmatter":{"title":"Kubernetes Networking","description":"Setup details"},"headers":[],"relativePath":"6-Networking/k3s-Networking.md","filePath":"6-Networking/k3s-Networking.md"}'),d={name:"6-Networking/k3s-Networking.md"},c={id:"frontmatter-title",tabindex:"-1"};function u(o,e,h,p,f,g){return l(),i("div",null,[t("h1",c,[n(s(o.$frontmatter.title)+" ",1),e[0]||(e[0]=t("a",{class:"header-anchor",href:"#frontmatter-title","aria-label":'Permalink to "{{ $frontmatter.title }}"'},"​",-1))]),e[1]||(e[1]=a('<p>The &quot;Vanilla&quot; K3s cluster comes with already pre-configured networking elements. This allows us to focus more on deployment and enhancements as the basic setup serves the initial needs.</p><h2 id="k3s-default-network-setup" tabindex="-1">K3s Default Network Setup <a class="header-anchor" href="#k3s-default-network-setup" aria-label="Permalink to &quot;K3s Default Network Setup&quot;">​</a></h2><p>Assumption taken that cluster is installed without any modifications or substitutions from the default resource setup using <code>curl -sfL https://get.k3s.io | sh -</code></p><h3 id="cni-controller" tabindex="-1">CNI Controller <a class="header-anchor" href="#cni-controller" aria-label="Permalink to &quot;CNI Controller&quot;">​</a></h3><p>Handles pod-to-pod networking and IP address allocation across the cluster, enabling communication between containers.</p><ul><li>Default: <strong>Flannel</strong><ul><li>Operates pod-to-pod networking via overlay across nodes, VXLAN as default.</li><li>Auto creates required network interfaces and allocaes IP&#39;s to pods.</li><li>Resource smart, doesn&#39;t create overhead if there are no pod-to-pod deployments on a given node.</li><li>Alternative options: <code>Calico</code>, <code>Cilium</code>,</li><li>Additional info: <a href="./../6-Networking/Flannel.html">CNI: Flannel</a></li></ul></li></ul><h3 id="ingress-controller" tabindex="-1">Ingress Controller <a class="header-anchor" href="#ingress-controller" aria-label="Permalink to &quot;Ingress Controller&quot;">​</a></h3><p>Manages HTTP/HTTPS routing from outside the cluster to services, often including SSL termination and path-based routing.</p><ul><li>Default: <strong>Traefik</strong><ul><li>Routes external HTTP and HTTPS traffic to services/pods.</li><li>Offers built in Let&#39;s Encrypt support.</li><li>&quot;Cluster aware&quot; updates routing in real time without need for forced reloads.</li><li>Alternative options: <code>NGINX</code>, <code>HAProxy</code></li><li>Additional info: TBC</li></ul></li></ul><h3 id="dns-rersoltion" tabindex="-1">DNS Rersoltion <a class="header-anchor" href="#dns-rersoltion" aria-label="Permalink to &quot;DNS Rersoltion&quot;">​</a></h3><p>Provides name resolution for services and pods, enabling service discovery within the cluster.</p><ul><li>Default: <strong>CoreDNS</strong><ul><li>Enables name based service discovery within the cluster.</li><li>Alternative options: <code>kube-dns</code></li><li>Additional info: TBC</li></ul></li></ul><h3 id="service-load-balancer" tabindex="-1">Service Load Balancer <a class="header-anchor" href="#service-load-balancer" aria-label="Permalink to &quot;Service Load Balancer&quot;">​</a></h3><p>Distributes external traffic to the appropriate service endpoints across nodes in the cluster.</p><ul><li>Default: <strong>Klipper-LB</strong><ul><li>Resource smart lighweight service load balancer but limited by design</li><li>Automatically handles all service with type: <code>LoadBalancer</code></li><li>Alternative options: <code>MetalLB</code>, <code>Cilium LB</code>, <code>Cloud provider LB</code></li></ul></li></ul><h3 id="service-networking" tabindex="-1">Service Networking <a class="header-anchor" href="#service-networking" aria-label="Permalink to &quot;Service Networking&quot;">​</a></h3><p>Defines how services are exposed internally or externally, providing stable endpoints for accessing sets of pods.</p><ul><li>Default: <strong>ClusterIP</strong><ul><li>Provides stable Virtual IPs (VIP) for every service</li><li>Enables seamless traffic to pods irrespective on which node they start up</li><li>&quot;Cluster aware&quot; with dynamic service discovery without config reloads</li><li>Alterative options: <code>Headless Service</code>,<code>Service mesh</code></li></ul></li></ul><h3 id="traffic-proxy-forwarding" tabindex="-1">Traffic Proxy / Forwarding <a class="header-anchor" href="#traffic-proxy-forwarding" aria-label="Permalink to &quot;Traffic Proxy / Forwarding&quot;">​</a></h3><p>Forwards service traffic to backend pods and implements cluster networking rules for load balancing and routing.</p><ul><li>Default: <strong>kube-proxy</strong><ul><li>Forward traffic from LoadBalancer services to endppint utilising ClusterIP VIPs</li><li>&quot;Cluster aware&quot; updates rules in real time without need for forced reloads.</li><li>Alternative options: <code>Cilium (eBPF)</code>,<code>Calico eBPF</code>,<code>Service mesh</code></li></ul></li></ul><h3 id="network-policy" tabindex="-1">Network Policy <a class="header-anchor" href="#network-policy" aria-label="Permalink to &quot;Network Policy&quot;">​</a></h3><p>Controls pod-to-pod and pod-to-external traffic at the network level by defining rules for allowed or denied communication.</p><ul><li>Default: <strong>Not Enabled</strong><ul><li>Setup Option: <code>Calico</code>,<code>Cilium</code></li></ul></li></ul><h3 id="noteworthy-ports" tabindex="-1">Noteworthy Ports <a class="header-anchor" href="#noteworthy-ports" aria-label="Permalink to &quot;Noteworthy Ports&quot;">​</a></h3><p>Inbound Rules for K3s Nodes</p><table tabindex="0"><thead><tr><th>Protocol</th><th>Port</th><th>Source</th><th>Destination</th><th>Description</th></tr></thead><tbody><tr><td>TCP</td><td>6443</td><td>Agents</td><td>Servers</td><td>K3s supervisor and Kubernetes API Server</td></tr><tr><td>UDP</td><td>8472</td><td>All nodes</td><td>All nodes</td><td>Required for Flannel VXLAN</td></tr><tr><td>TCP</td><td>10250</td><td>All nodes</td><td>All nodes</td><td>Kubelet metrics</td></tr></tbody></table>',27))])}const b=r(d,[["render",u]]);export{w as __pageData,b as default};
